# komo-web アーキテクチャ設計

このドキュメントでは、komo-web パッケージ固有のディレクトリ構成と拡張ポイントについて説明します。

システム全体のアーキテクチャについては、[プロジェクトドキュメント](/docs)を参照してください。

## ディレクトリ構成

```
src/
├── middleware/  # サーバーミドルウェア層
├── utils/       # サーバーユーティリティ層
├── shared/      # 共通定義
└── frontend/    # フロントエンドアプリ
    ├── components/  # 再利用可能コンポーネント
    ├── pages/       # ページコンポーネント
    ├── hooks/       # カスタムHooks
    ├── utils/       # フロントエンドユーティリティ
    └── styles/      # スタイル
```

## 各層の責務

各層の詳細な責務や実装については、実際のコードを参照してください。主要な層の概要：

- **サーバー層**: Bun Serve による静的ファイル配信、HMR 対応
- **フロントエンド層**: React ベースの SPA、ページ・コンポーネント構成
- **共通層** (`src/shared/`): サーバー・フロントエンド間で共有する型・定数

## コンポーネント設計

コンポーネントは、プレゼンテーションコンポーネントとコンテナコンポーネントに分離して設計することを推奨します：

- **プレゼンテーションコンポーネント**: UI の表示に専念、props を受け取り表示
- **コンテナコンポーネント**: データ取得、状態管理、ビジネスロジック

## スタイリング

- **Tailwind CSS**: ユーティリティファースト、レスポンシブデザイン
- **shadcn/ui** (将来): 再利用可能な UI コンポーネント

## 拡張ポイント

### 新しいページの追加

1. `frontend/pages/` に新しいページコンポーネントを作成
2. `frontend/App.tsx` でルーティングを追加
3. 必要に応じて `frontend/components/` に再利用コンポーネントを作成

### 新しいコンポーネントの追加

1. `frontend/components/` に新しいコンポーネントファイルを作成
2. プレゼンテーション/コンテナの責務を明確に
3. 必要に応じて `frontend/hooks/` でカスタムフックを作成

## 今後の課題

- shadcn/ui コンポーネントの導入
- サーバー一覧・詳細画面の実装
- 認証状態管理の実装
- カスタムフックの実装
- テスト追加（ユニット・E2E）
- コード分割（React.lazy）
- Docker/Podman コンテナ化

## 関連ドキュメント

- [PRD](/docs/prd.md): プロダクト要求定義
- [SRS](/docs/srs.md): ソフトウェア要件定義
- [SDD](/docs/sdd.md): システム設計ドキュメント
- [パッケージ README](./README.md): 開発者向けドキュメント
